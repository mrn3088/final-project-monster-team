<!DOCTYPE html>
<html>
<head>
  <!-- Include ZingGrid and axios libraries -->
  <script src="https://cdn.zinggrid.com/zinggrid.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
  <title>Data Visualization</title>
</head>


<body>
  <!-- Define your ZingGrid -->
  <zing-grid
    id="myGrid"
    caption="Browser Usage"
    data='[]'>
    <zg-column index="browserType" header="Browser Type"></zg-column>
    <zg-column index="count" header="Count"></zg-column>
  </zing-grid>

  <script>
    // Initialize an array to store the counts of each browser type
    var data = [
      { browserType: 'Chrome', count: 0 },
      { browserType: 'Firefox', count: 0 },
      { browserType: 'Safari', count: 0 },
      { browserType: 'Internet Explorer', count: 0 },
      { browserType: 'Other', count: 0 }
    ];
    axios.get(`/api/static/`)
    .then(response => {
        console.log(response.data);  // 打印返回的数据
        //...
    });

    // Fetch data from your Express app
    axios.get('http://cse135.monster:3005/static')
      .then(response => {
        var records = response.data;
        for (var i = 0; i < records.length; i++) {
          var userAgent = records[i].userAgent;
          if (userAgent.includes('Chrome')) {
            data[0].count++;
          } else if (userAgent.includes('Firefox')) {
            data[1].count++;
          } else if (userAgent.includes('Safari')) {
            data[2].count++;
          } else if (userAgent.includes('Internet Explorer')) {
            data[3].count++;
          } else {
            data[4].count++;
          }
        }

        // Update the ZingGrid with the new data
        document.getElementById('myGrid').setData(data);
      });
  </script>
</body>
</html>
